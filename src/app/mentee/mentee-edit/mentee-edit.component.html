<div class="spinner-container" *ngIf="(loading$ | async )">
    <mat-spinner></mat-spinner>
</div>
<div *ngIf="mentee" class="card">
    <div class="card-header">
        <h4>{{title}}</h4>
    </div>
    <div class="card-body">
        <form [formGroup]="menteeForm">
            <!-- Interest or passion-->
            <div class="col-lg-12 col-md-12 col-sm-12">
                <mat-form-field appearance="outline" class="textarea-full-width">
                    <mat-label>Interest/passion<span style="color:red">*</span></mat-label>
                    <textarea matInput placeholder="Enter your passion or interest" cdkTextareaAutosize
                        cdkAutosizeMinRows="4" cdkAutosizeMaxRows="5" #autosize="cdkTextareaAutosize"
                        formControlName="Interest">
                        </textarea>
                    <mat-error
                        *ngIf="menteeForm.get('Interest').hasError('required') && menteeForm.get('Interest').touched">
                        Required
                    </mat-error>
                </mat-form-field>
            </div>
            <!--Mentoring period-->
            <div class="col-lg-6 col-md-12 col-sm-12">
                <h6 class="card-title">Mentoring period</h6>
                <!--unit of measurement -->
                <mat-form-field appearance="outline">
                    <!-- <mat-label>Select <span style="color: red;">*</span></mat-label> -->
                    <mat-label>Unit of time <span style="color: red;">*</span></mat-label>
                    <input matInput type="text" formControlName="UnitOfTimeId" [value]="unitOfTimes[0]['Value'] == 1 ? 'Months' : ''"/>
                    <mat-icon matSuffix>calendar_today</mat-icon>
                    <!-- <mat-select formControlName="UnitOfTimeId">
                        <mat-option *ngFor="let item of unitOfTimes" [value]="item['Value']">
                            {{item['Text']}}
                        </mat-option>
                    </mat-select> -->
                    <mat-error
                        *ngIf="menteeForm.get('UnitOfTimeId').hasError('required')  && menteeForm.get('UnitOfTimeId').touched">
                        Required
                    </mat-error>
                </mat-form-field>
                <!-- duration-->
                <mat-form-field appearance="outline" class="input-width">
                    <mat-label>Duration <span style="color: red;">*</span></mat-label>
                    <input matInput placeholder="Duration" type="number" formControlName="Duration" />
                    <mat-icon matSuffix>watch_later</mat-icon>
                    <mat-error
                        *ngIf="menteeForm.get('Duration').hasError('min') && menteeForm.get('Duration').touched">
                        Minimum value must be 1
                    </mat-error>
                    <mat-error
                        *ngIf="menteeForm.get('Duration').hasError('max') && menteeForm.get('Duration').touched">
                        Maximum value must be 18 months
                    </mat-error>
                </mat-form-field>
            </div>
            <mat-card>
                <!-- Division and typeahead -->
                <div class="row">
                    <!--Choose a division-->
                    <div class="col-lg-6 col-md-12 col-sm-12">
                        <h6 class="card-title">Would you prefer a mentor from within your division? <span
                                style="color:red">*</span>
                        </h6>
                        <mat-radio-group aria-labelledby="custom-radio-group-label" class="custom-radio-group"
                            formControlName="InDivision">
                            <mat-radio-button class="custom-radio-button"
                                *ngFor="let item of searchDivisions; let i = index" [value]="item['Value']">
                                {{item['Text']}}
                            </mat-radio-button>
                        </mat-radio-group>

                    </div>
                    <!--Choose a mentor from any division :: Typeahead-->
                    <div class="col-lg-6 col-md-12 col-sm-12">
                        <h6 class="card-title">Search for preferred mentor </h6>
                        <mat-form-field class="typeahead-full-width" appearance="outline">
                            <input matInput placeholder="Enter your preferred mentor name" aria-label="Mentor"
                                [matAutocomplete]="auto" formControlName="PreferredMentorEmpId">
                            <mat-label>Mentor autocomplete search </mat-label>
                            <mat-icon matSuffix>search</mat-icon>
                            <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
                                <mat-option *ngIf='isLoading' class="is-loading">
                                    <mat-spinner diameter="50"></mat-spinner>
                                </mat-option>
                                <ng-container *ngIf="'!isLoading'">
                                    <mat-option *ngFor="let mentor of filteredMentors$ | async" [value]="mentor">
                                        <span *ngIf="mentor['EmployeeId']"><img width="50px"
                                                src="http://rmb-vdv-aspn01/evolve/user_photos/{{mentor.EmployeeId}}.jpg" alt=''/></span>&nbsp;&nbsp;
                                        {{mentor.FullName }}<br />
                                    </mat-option>
                                </ng-container>
                            </mat-autocomplete>
                        </mat-form-field>
                    </div>
                </div>
            </mat-card>
            <br />
            <div class="row">
                <div class="col-lg-6 col-md-12 col-sm-12">
                    <h6 class="card-title">Select prefered mentor gender <span style="color:red">*</span></h6>
                    <mat-radio-group aria-labelledby="gender radio group" formControlName="PreferredMentorGenderId"
                        class="custom-radio-group">
                        <mat-radio-button *ngFor="let item of gender; let i = index" [value]="item['Value']">
                            {{item['Text']}} &nbsp;
                        </mat-radio-button>
                    </mat-radio-group>
                </div>
                <div class="col-lg-6 col-md-12 col-sm-12">
                    <h6 class="card-title">Select prefered mentor age <span style="color:red">*</span> </h6>
                    <mat-radio-group aria-labelledby="gender radio group" formControlName="PreferredMentorAgeId"
                        class="custom-radio-group">
                        <mat-radio-button *ngFor="let item of age; let i = index" [value]="item['Value']">
                            {{item['Text']}} &nbsp;
                        </mat-radio-button>
                    </mat-radio-group>
                </div>
            </div>
            <!--Achievement and experience-->
            <div class="row">
                <!-- achievement -->
                <div class="col-lg-6 col-md-12 col-sm-12">
                    <h6 class="card-title">What I would like to achieve from mentoring (Choose 3) &nbsp;<span
                            style="color:red">*</span></h6>
                    <ng-container>
                        <div formArrayName="MentorDomianArea" *ngFor="let item of sortedArrayDomainAreas; let i=index">
                            <mat-checkbox value="item[i]['Value']" [formControlName]="i">
                                {{sortedArrayDomainAreas[i]['Text']}}&nbsp;
                            </mat-checkbox>

                            <br />
                        </div>
                        <mat-error
                            *ngIf="menteeForm.get('MentorDomianArea').hasError('limit') && menteeForm.get('MentorDomianArea').touched">
                            Choose only three.
                        </mat-error>
                        <mat-error
                            *ngIf="menteeForm.get('MentorDomianArea').hasError('zero') && menteeForm.get('MentorDomianArea').touched">
                            Choose at least one.
                        </mat-error>
                        
                    </ng-container>
                </div>
                <!-- experience -->
                <div class="col-lg-6 col-md-12 col-sm-12">
                    <h6 class="card-title">Type of experience I seek in a mentor<span style="color:red">*</span></h6>
                    <mat-radio-group aria-labelledby="custom-radio-group-label" class="custom-radio-group"
                        formControlName="ExperienceId">
                        <mat-radio-button class="custom-radio-button"
                            *ngFor="let item of sortedArrayExperiences; let i = index" [value]="item['Value']">
                            {{item['Text']}}
                        </mat-radio-button>
                    </mat-radio-group>
                </div>
            </div>
            <!-- Comments-->
            <div class="col-lg-12 col-md-12 col-sm-12">
                <mat-form-field appearance="outline" class="textarea-full-width">
                    <mat-label>Comments<span style="color:red">*</span></mat-label>
                    <textarea matInput placeholder="Enter your comments" cdkTextareaAutosize cdkAutosizeMinRows="4"
                        cdkAutosizeMaxRows="5" #autosize="cdkTextareaAutosize" formControlName="Comment">
                        </textarea>
                </mat-form-field>
            </div>
            <!--Terms and conditions-->
            <div class="col-lg-12 col-md-10 col-sm-12" style="padding-left: 1em; padding-right: 1em;">
                <div class="card">
                    <div class="card-body">
                        <div class="row">

                            <!-- share profile-->
                            <div class="col-lg-12 col-md-12 col-sm-12">

                                <mat-checkbox [formControlName]="'ShareProfile'">
                                    I am comfortable that you share the above profile with a prospective/assigned mentor
                                </mat-checkbox>
                                <br />

                            </div>
                            <!--terms-->
                            <div class="col-lg-12 col-md-12 col-sm-12">

                                <mat-checkbox [formControlName]="'ReadTerms'">
                                    I have read and understood the criteria to become a mentee
                                </mat-checkbox>
                                <br />

                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <br />
            <!--Save, Submit and Cancel buttons-->
            <div class="row justify-content-center">
                <div class="col-lg-12 col-md-8 col-sm-12">
                    <span *ngIf="!IsEdit"><button mat-raised-button color="primary" type="submit"
                            [disabled]="!menteeForm.valid" (click)="onSubmitMentee()">&nbsp;Submit&nbsp;
                        </button>
                        &nbsp;&nbsp;&nbsp;
                    </span>
                    <span *ngIf="IsEdit"> <button mat-raised-button color="primary" type="button"
                            [disabled]="!menteeForm.valid" (click)="onSaveMentee()">&nbsp;Save&nbsp;
                        </button>
                    </span>
                    <!--
                    {{ IsEdit}}-->
                    <!-- {{ menteeForm.valid}} 
                    {{ menteeForm.touched}} -->
                    &nbsp;&nbsp;&nbsp;
                    <button mat-raised-button color="warn" type="button" (click)="cancelMentee()">Cancel</button>
                </div>
            </div>
            <!-- {{mentee | json}} -->
        </form>
    </div>
</div>
